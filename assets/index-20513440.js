import{r as v,a as jt,u as Ne,b as Se,L as fe,c as Me,d as F,N as te,R as it,B as wt}from"./vendor-e40c3829.js";import{z as T,m as h,H as z,S as Ge,A as U,a as ee,U as be,C as He,L as We,E as Le,b as ye,c as Nt,d as St,e as _t,f as Ct,g as kt,G as Rt,M as At,h as It,i as Ve,j as ve,X as Oe,k as ot,l as nt,n as Be,R as H,B as je,T as ze,o as Fe,F as Lt,p as Et,q as Pt,r as Tt,s as lt,t as ct,P as Dt,W as we,u as Ee,v as Je,w as ce,x as Mt,y as Ke,D as Ye,I as Ot,J as Bt,K as zt}from"./ui-dbc1974f.js";import{c as _e}from"./state-94b156c3.js";import{o as Ft,r as $t,a as Ut,c as Ce,b as q,d as Pe,e as Xe,f as qt,u as dt}from"./forms-7b901ecc.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();var mt={exports:{}},ke={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gt=v,Ht=Symbol.for("react.element"),Wt=Symbol.for("react.fragment"),Vt=Object.prototype.hasOwnProperty,Jt=Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kt={key:!0,ref:!0,__self:!0,__source:!0};function xt(t,a,s){var r,i={},o=null,l=null;s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),a.ref!==void 0&&(l=a.ref);for(r in a)Vt.call(a,r)&&!Kt.hasOwnProperty(r)&&(i[r]=a[r]);if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ht,type:t,key:o,ref:l,props:i,_owner:Jt.current}}ke.Fragment=Wt;ke.jsx=xt;ke.jsxs=xt;mt.exports=ke;var e=mt.exports,Te={},Qe=jt;Te.createRoot=Qe.createRoot,Te.hydrateRoot=Qe.hydrateRoot;function Yt(t,a){let s;try{s=t()}catch{return}return{getItem:i=>{var o;const l=c=>c===null?null:JSON.parse(c,a?.reviver),n=(o=s.getItem(i))!=null?o:null;return n instanceof Promise?n.then(l):l(n)},setItem:(i,o)=>s.setItem(i,JSON.stringify(o,a?.replacer)),removeItem:i=>s.removeItem(i)}}const de=t=>a=>{try{const s=t(a);return s instanceof Promise?s:{then(r){return de(r)(s)},catch(r){return this}}}catch(s){return{then(r){return this},catch(r){return de(r)(s)}}}},Xt=(t,a)=>(s,r,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:u=>u,version:0,merge:(u,w)=>({...w,...u}),...a},l=!1;const n=new Set,c=new Set;let m;try{m=o.getStorage()}catch{}if(!m)return t((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),s(...u)},r,i);const f=de(o.serialize),N=()=>{const u=o.partialize({...r()});let w;const y=f({state:u,version:o.version}).then(R=>m.setItem(o.name,R)).catch(R=>{w=R});if(w)throw w;return y},d=i.setState;i.setState=(u,w)=>{d(u,w),N()};const g=t((...u)=>{s(...u),N()},r,i);let b;const p=()=>{var u;if(!m)return;l=!1,n.forEach(y=>y(r()));const w=((u=o.onRehydrateStorage)==null?void 0:u.call(o,r()))||void 0;return de(m.getItem.bind(m))(o.name).then(y=>{if(y)return o.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==o.version){if(o.migrate)return o.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var R;return b=o.merge(y,(R=r())!=null?R:g),s(b,!0),N()}).then(()=>{w?.(b,void 0),l=!0,c.forEach(y=>y(b))}).catch(y=>{w?.(void 0,y)})};return i.persist={setOptions:u=>{o={...o,...u},u.getStorage&&(m=u.getStorage())},clearStorage:()=>{m?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>l,onHydrate:u=>(n.add(u),()=>{n.delete(u)}),onFinishHydration:u=>(c.add(u),()=>{c.delete(u)})},p(),b||g},Qt=(t,a)=>(s,r,i)=>{let o={storage:Yt(()=>localStorage),partialize:p=>p,version:0,merge:(p,u)=>({...u,...p}),...a},l=!1;const n=new Set,c=new Set;let m=o.storage;if(!m)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),s(...p)},r,i);const f=()=>{const p=o.partialize({...r()});return m.setItem(o.name,{state:p,version:o.version})},N=i.setState;i.setState=(p,u)=>{N(p,u),f()};const d=t((...p)=>{s(...p),f()},r,i);i.getInitialState=()=>d;let g;const b=()=>{var p,u;if(!m)return;l=!1,n.forEach(y=>{var R;return y((R=r())!=null?R:d)});const w=((u=o.onRehydrateStorage)==null?void 0:u.call(o,(p=r())!=null?p:d))||void 0;return de(m.getItem.bind(m))(o.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==o.version){if(o.migrate)return[!0,o.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var R;const[M,A]=y;if(g=o.merge(A,(R=r())!=null?R:d),s(g,!0),M)return f()}).then(()=>{w?.(g,void 0),g=r(),l=!0,c.forEach(y=>y(g))}).catch(y=>{w?.(void 0,y)})};return i.persist={setOptions:p=>{o={...o,...p},p.storage&&(m=p.storage)},clearStorage:()=>{m?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>b(),hasHydrated:()=>l,onHydrate:p=>(n.add(p),()=>{n.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},o.skipHydration||b(),g||d},Zt=(t,a)=>"getStorage"in a||"serialize"in a||"deserialize"in a?Xt(t,a):Qt(t,a),Re=Zt;class es{constructor(){typeof window<"u"&&window.localStorage&&this.initializeDefaultUsers()}initializeDefaultUsers(){if(this.getStoredUsers().length===0){const s=[{id:1,username:"Admin",password:"Admin@123",role:"admin",created_at:new Date().toISOString()},{id:2,username:"cashier1",password:"cashier123",role:"cashier",created_at:new Date().toISOString()}];localStorage.setItem("vila-pos-users",JSON.stringify(s))}}getStoredUsers(){if(typeof window>"u"||!window.localStorage)return[];const a=localStorage.getItem("vila-pos-users");return a?JSON.parse(a):[]}saveUsers(a){typeof window<"u"&&window.localStorage&&localStorage.setItem("vila-pos-users",JSON.stringify(a))}async login(a){return new Promise(s=>{setTimeout(()=>{const i=this.getStoredUsers().find(o=>o.username.toLowerCase()===a.username.toLowerCase()&&o.password===a.password);s(i?{success:!0,user:{id:i.id,username:i.username,role:i.role,full_name:i.full_name||i.username}}:{success:!1,message:"Invalid username or password"})},800)})}async getCurrentUser(){return null}}const ts=new es,me=_e(Re((t,a)=>({user:null,isLoading:!1,error:null,login:async s=>{t({isLoading:!0,error:null});try{const r=await ts.login(s);return r.success?(t({user:r.user,isLoading:!1}),T.success(`Welcome back, ${r.user.username}!`),r):(t({error:r.message,isLoading:!1}),T.error(r.message),r)}catch(r){const i=r.message||"Login failed";return t({error:i,isLoading:!1}),T.error(i),{success:!1,message:i}}},logout:()=>{t({user:null,error:null}),T.success("Logged out successfully")},clearError:()=>t({error:null}),initialize:()=>{const s=a().user;t(s?{user:s,isLoading:!1}:{isLoading:!1}),setTimeout(()=>{const r=document.getElementById("initial-loading");r&&(r.style.display="none")},100)}}),{name:"vila-pos-auth",partialize:t=>({user:t.user})}));function ht(t,a,s){return a===void 0&&(a={}),s===void 0&&(s={}),function(r,i,o){try{return Promise.resolve(function(l,n){try{var c=(a.context,Promise.resolve(t[s.mode==="sync"?"validateSync":"validate"](r,Object.assign({abortEarly:!1},a,{context:i}))).then(function(m){return o.shouldUseNativeValidation&&Ft({},o),{values:s.raw?r:m,errors:{}}}))}catch(m){return n(m)}return c&&c.then?c.then(void 0,n):c}(0,function(l){if(!l.inner)throw l;return{values:{},errors:$t((n=l,c=!o.shouldUseNativeValidation&&o.criteriaMode==="all",(n.inner||[]).reduce(function(m,f){if(m[f.path]||(m[f.path]={message:f.message,type:f.type}),c){var N=m[f.path].types,d=N&&N[f.type];m[f.path]=Ut(f.path,c,m,f.type,d?[].concat(d,f.message):f.message)}return m},{})),o)};var n,c}))}catch(l){return Promise.reject(l)}}}const ss=Ce({username:q().required("Username is required").min(3,"Username must be at least 3 characters"),password:q().required("Password is required").min(6,"Password must be at least 6 characters")});Ce({username:q().required("Username is required").min(3,"Username must be at least 3 characters").max(50,"Username must be less than 50 characters"),password:q().when("$isEditing",{is:!0,then:t=>t.min(6,"Password must be at least 6 characters").max(100,"Password must be less than 100 characters"),otherwise:t=>t.required("Password is required").min(6,"Password must be at least 6 characters").max(100,"Password must be less than 100 characters")}),full_name:q().required("Full name is required").min(2,"Full name must be at least 2 characters").max(100,"Full name must be less than 100 characters"),email:q().email("Invalid email format").max(100,"Email must be less than 100 characters"),phone:q().matches(/^[0-9+\-\s()]+$/,"Invalid phone number format").max(20,"Phone number must be less than 20 characters")});Ce({room_number:q().required("Room number is required").max(10,"Room number must be less than 10 characters"),room_type:q().required("Room type is required").oneOf(["ac","non_ac"],"Invalid room type"),price_per_day:Pe().required("Price per day is required").positive("Price must be positive").max(1e6,"Price must be less than Rs. 1,000,000"),description:q().max(500,"Description must be less than 500 characters")});const rs=Ce({customer_name:q().required("Customer name is required").min(2,"Customer name must be at least 2 characters").max(100,"Customer name must be less than 100 characters"),customer_phone:q().matches(/^[0-9+\-\s()]+$/,"Invalid phone number format").max(20,"Phone number must be less than 20 characters"),customer_address:q().max(200,"Address must be less than 200 characters"),room_id:Pe().required("Room selection is required").positive("Invalid room selection"),check_in_date:Xe().required("Check-in date is required").min(new Date().toDateString(),"Check-in date cannot be in the past"),check_out_date:Xe().required("Check-out date is required").min(qt("check_in_date"),"Check-out date must be after check-in date"),price_per_day:Pe().required("Price per day is required").positive("Price must be positive")});function ut(t){var a,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(a=0;a<i;a++)t[a]&&(s=ut(t[a]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function as(){for(var t,a,s=0,r="",i=arguments.length;s<i;s++)(t=arguments[s])&&(a=ut(t))&&(r&&(r+=" "),r+=a);return r}const $e="-",is=t=>{const a=ns(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{const n=l.split($e);return n[0]===""&&n.length!==1&&n.shift(),pt(n,a)||os(l)},getConflictingClassGroupIds:(l,n)=>{const c=s[l]||[];return n&&r[l]?[...c,...r[l]]:c}}},pt=(t,a)=>{if(t.length===0)return a.classGroupId;const s=t[0],r=a.nextPart.get(s),i=r?pt(t.slice(1),r):void 0;if(i)return i;if(a.validators.length===0)return;const o=t.join($e);return a.validators.find(({validator:l})=>l(o))?.classGroupId},Ze=/^\[(.+)\]$/,os=t=>{if(Ze.test(t)){const a=Ze.exec(t)[1],s=a?.substring(0,a.indexOf(":"));if(s)return"arbitrary.."+s}},ns=t=>{const{theme:a,prefix:s}=t,r={nextPart:new Map,validators:[]};return cs(Object.entries(t.classGroups),s).forEach(([o,l])=>{De(l,r,o,a)}),r},De=(t,a,s,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?a:et(a,i);o.classGroupId=s;return}if(typeof i=="function"){if(ls(i)){De(i(r),a,s,r);return}a.validators.push({validator:i,classGroupId:s});return}Object.entries(i).forEach(([o,l])=>{De(l,et(a,o),s,r)})})},et=(t,a)=>{let s=t;return a.split($e).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},ls=t=>t.isThemeGetter,cs=(t,a)=>a?t.map(([s,r])=>{const i=r.map(o=>typeof o=="string"?a+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,n])=>[a+l,n])):o);return[s,i]}):t,ds=t=>{if(t<1)return{get:()=>{},set:()=>{}};let a=0,s=new Map,r=new Map;const i=(o,l)=>{s.set(o,l),a++,a>t&&(a=0,r=s,s=new Map)};return{get(o){let l=s.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return i(o,l),l},set(o,l){s.has(o)?s.set(o,l):i(o,l)}}},gt="!",ms=t=>{const{separator:a,experimentalParseClassName:s}=t,r=a.length===1,i=a[0],o=a.length,l=n=>{const c=[];let m=0,f=0,N;for(let u=0;u<n.length;u++){let w=n[u];if(m===0){if(w===i&&(r||n.slice(u,u+o)===a)){c.push(n.slice(f,u)),f=u+o;continue}if(w==="/"){N=u;continue}}w==="["?m++:w==="]"&&m--}const d=c.length===0?n:n.substring(f),g=d.startsWith(gt),b=g?d.substring(1):d,p=N&&N>f?N-f:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:p}};return s?n=>s({className:n,parseClassName:l}):l},xs=t=>{if(t.length<=1)return t;const a=[];let s=[];return t.forEach(r=>{r[0]==="["?(a.push(...s.sort(),r),s=[]):s.push(r)}),a.push(...s.sort()),a},hs=t=>({cache:ds(t.cacheSize),parseClassName:ms(t),...is(t)}),us=/\s+/,ps=(t,a)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:i}=a,o=[],l=t.trim().split(us);let n="";for(let c=l.length-1;c>=0;c-=1){const m=l[c],{modifiers:f,hasImportantModifier:N,baseClassName:d,maybePostfixModifierPosition:g}=s(m);let b=!!g,p=r(b?d.substring(0,g):d);if(!p){if(!b){n=m+(n.length>0?" "+n:n);continue}if(p=r(d),!p){n=m+(n.length>0?" "+n:n);continue}b=!1}const u=xs(f).join(":"),w=N?u+gt:u,y=w+p;if(o.includes(y))continue;o.push(y);const R=i(p,b);for(let M=0;M<R.length;++M){const A=R[M];o.push(w+A)}n=m+(n.length>0?" "+n:n)}return n};function gs(){let t=0,a,s,r="";for(;t<arguments.length;)(a=arguments[t++])&&(s=ft(a))&&(r&&(r+=" "),r+=s);return r}const ft=t=>{if(typeof t=="string")return t;let a,s="";for(let r=0;r<t.length;r++)t[r]&&(a=ft(t[r]))&&(s&&(s+=" "),s+=a);return s};function fs(t,...a){let s,r,i,o=l;function l(c){const m=a.reduce((f,N)=>N(f),t());return s=hs(m),r=s.cache.get,i=s.cache.set,o=n,n(c)}function n(c){const m=r(c);if(m)return m;const f=ps(c,s);return i(c,f),f}return function(){return o(gs.apply(null,arguments))}}const D=t=>{const a=s=>s[t]||[];return a.isThemeGetter=!0,a},bt=/^\[(?:([a-z-]+):)?(.+)\]$/i,bs=/^\d+\/\d+$/,ys=new Set(["px","full","screen"]),vs=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,js=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ws=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ns=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ss=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,J=t=>re(t)||ys.has(t)||bs.test(t),Y=t=>ae(t,"length",Es),re=t=>!!t&&!Number.isNaN(Number(t)),Ie=t=>ae(t,"number",re),ne=t=>!!t&&Number.isInteger(Number(t)),_s=t=>t.endsWith("%")&&re(t.slice(0,-1)),C=t=>bt.test(t),X=t=>vs.test(t),Cs=new Set(["length","size","percentage"]),ks=t=>ae(t,Cs,yt),Rs=t=>ae(t,"position",yt),As=new Set(["image","url"]),Is=t=>ae(t,As,Ts),Ls=t=>ae(t,"",Ps),le=()=>!0,ae=(t,a,s)=>{const r=bt.exec(t);return r?r[1]?typeof a=="string"?r[1]===a:a.has(r[1]):s(r[2]):!1},Es=t=>js.test(t)&&!ws.test(t),yt=()=>!1,Ps=t=>Ns.test(t),Ts=t=>Ss.test(t),Ds=()=>{const t=D("colors"),a=D("spacing"),s=D("blur"),r=D("brightness"),i=D("borderColor"),o=D("borderRadius"),l=D("borderSpacing"),n=D("borderWidth"),c=D("contrast"),m=D("grayscale"),f=D("hueRotate"),N=D("invert"),d=D("gap"),g=D("gradientColorStops"),b=D("gradientColorStopPositions"),p=D("inset"),u=D("margin"),w=D("opacity"),y=D("padding"),R=D("saturate"),M=D("scale"),A=D("sepia"),S=D("skew"),L=D("space"),x=D("translate"),_=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto",C,a],k=()=>[C,a],O=()=>["",J,Y],K=()=>["auto",re,C],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],P=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>["start","end","center","between","around","evenly","stretch"],oe=()=>["","0",C],qe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[re,C];return{cacheSize:500,separator:":",theme:{colors:[le],spacing:[J,Y],blur:["none","",X,C],brightness:V(),borderColor:[t],borderRadius:["none","","full",X,C],borderSpacing:k(),borderWidth:O(),contrast:V(),grayscale:oe(),hueRotate:V(),invert:oe(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[_s,Y],inset:E(),margin:E(),opacity:V(),padding:k(),saturate:V(),scale:V(),sepia:oe(),skew:V(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",C]}],container:["container"],columns:[{columns:[X]}],"break-after":[{"break-after":qe()}],"break-before":[{"break-before":qe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),C]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ne,C]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",C]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",ne,C]}],"grid-cols":[{"grid-cols":[le]}],"col-start-end":[{col:["auto",{span:["full",ne,C]},C]}],"col-start":[{"col-start":K()}],"col-end":[{"col-end":K()}],"grid-rows":[{"grid-rows":[le]}],"row-start-end":[{row:["auto",{span:[ne,C]},C]}],"row-start":[{"row-start":K()}],"row-end":[{"row-end":K()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",C]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",C]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...Z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[u]}],mx:[{mx:[u]}],my:[{my:[u]}],ms:[{ms:[u]}],me:[{me:[u]}],mt:[{mt:[u]}],mr:[{mr:[u]}],mb:[{mb:[u]}],ml:[{ml:[u]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",C,a]}],"min-w":[{"min-w":[C,a,"min","max","fit"]}],"max-w":[{"max-w":[C,a,"none","full","min","max","fit","prose",{screen:[X]},X]}],h:[{h:[C,a,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[C,a,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[C,a,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[C,a,"auto","min","max","fit"]}],"font-size":[{text:["base",X,Y]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ie]}],"font-family":[{font:[le]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",C]}],"line-clamp":[{"line-clamp":["none",re,Ie]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",J,C]}],"list-image":[{"list-image":["none",C]}],"list-style-type":[{list:["none","disc","decimal",C]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...P(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",J,Y]}],"underline-offset":[{"underline-offset":["auto",J,C]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",C]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",C]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),Rs]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ks]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Is]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[n]}],"border-w-x":[{"border-x":[n]}],"border-w-y":[{"border-y":[n]}],"border-w-s":[{"border-s":[n]}],"border-w-e":[{"border-e":[n]}],"border-w-t":[{"border-t":[n]}],"border-w-r":[{"border-r":[n]}],"border-w-b":[{"border-b":[n]}],"border-w-l":[{"border-l":[n]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...P(),"hidden"]}],"divide-x":[{"divide-x":[n]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[n]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:P()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...P()]}],"outline-offset":[{"outline-offset":[J,C]}],"outline-w":[{outline:[J,Y]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[J,Y]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",X,Ls]}],"shadow-color":[{shadow:[le]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",X,C]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[N]}],saturate:[{saturate:[R]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[N]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",C]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",C]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",C]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[ne,C]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",C]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",C]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",C]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[J,Y,Ie]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Ms=fs(Ds);function G(...t){return Ms(as(t))}const se=({size:t="md",className:a="",color:s="primary",variant:r="default"})=>{const i={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},o={primary:"border-blue-500",white:"border-white",slate:"border-slate-400",blue:"border-blue-500",green:"border-green-500"};if(r==="custom"){const l={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-20 h-20"};return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
            .custom-loader-${t} {
              aspect-ratio: 1;
              display: grid;
              color: currentColor;
            }
            .custom-loader-${t}:before,
            .custom-loader-${t}:after {
              content: "";
              grid-area: 1/1;
              width: 35%;
              aspect-ratio: 1;
              box-shadow: 0 0 0 3px currentColor inset;
              filter: drop-shadow(40px 40px 0 currentColor);
              animation: custom-loader-animation-${t} 2s infinite alternate;
            }
            .custom-loader-${t}:after {
              margin: 0 0 0 auto; 
              filter: drop-shadow(-40px 40px 0 currentColor);
              animation-delay: -1s;
            }
            @keyframes custom-loader-animation-${t} {
              0%,10%   {border-radius:0}
              30%,40%  {border-radius:50% 0}
              60%,70%  {border-radius:50%}
              90%,100% {border-radius:0 50%}
            }
          `}}),e.jsx("div",{className:G(`custom-loader-${t}`,l[t],a),role:"status","aria-label":"Loading",children:e.jsx("span",{className:"sr-only",children:"Loading..."})})]})}return e.jsx("div",{className:G("animate-spin rounded-full border-2 border-transparent",i[t]||i.md,o[s]||o.primary,a),style:{borderTopColor:"currentColor"},role:"status","aria-label":"Loading",children:e.jsx("span",{className:"sr-only",children:"Loading..."})})},W=({className:t=""})=>e.jsx("div",{className:G("card animate-pulse",t),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-4 bg-dark-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-dark-700 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-dark-700 rounded w-5/6"})]})}),Os=({rows:t=5,columns:a=4})=>e.jsx("div",{className:"space-y-3",children:Array.from({length:t}).map((s,r)=>e.jsx("div",{className:"flex gap-4 animate-pulse",children:Array.from({length:a}).map((i,o)=>e.jsx("div",{className:"h-4 bg-dark-700 rounded flex-1"},o))},r))}),Bs=()=>{const[t,a]=v.useState(!1),[s,r]=v.useState(0),[i,o]=v.useState(!1),[l,n]=v.useState(0),[c,m]=v.useState(new Date),[f,N]=v.useState([]),[d,g]=v.useState(""),{login:b,isLoading:p,error:u}=me(),w=Ne(),y=Se();v.useEffect(()=>{(()=>{const P=[];for(let B=0;B<20;B++)P.push({id:B,x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+2,duration:Math.random()*20+10,delay:Math.random()*5});N(P)})()},[]),v.useEffect(()=>{const I=()=>{const B=new Date;m(B);const Z=B.getHours();Z<12?g("Good Morning"):Z<17?g("Good Afternoon"):Z<21?g("Good Evening"):g("Good Night")};I();const P=setInterval(I,1e3);return()=>clearInterval(P)},[]);const{register:R,handleSubmit:M,formState:{errors:A,isValid:S,touchedFields:L},setError:x,clearErrors:_,watch:j}=dt({resolver:ht(ss),mode:"onBlur"});j("username"),j("password"),v.useEffect(()=>{if(s>=5){o(!0),n(300);const I=setInterval(()=>{n(P=>P<=1?(o(!1),r(0),clearInterval(I),0):P-1)},1e3);return()=>clearInterval(I)}},[s]);const E=async I=>{if(!i)try{_();const P=await b(I);if(P.success){r(0);const B=y.state?.from?.pathname||(P.user.role==="admin"?"/admin":"/cashier");w(B,{replace:!0})}else r(B=>B+1),x("root",{type:"manual",message:P.message||"Invalid credentials. Please try again."})}catch(P){r(B=>B+1),x("root",{type:"manual",message:P.message||"Login failed. Please try again."})}},k=I=>{const P=Math.floor(I/60),B=I%60;return`${P}:${B.toString().padStart(2,"0")}`},O=I=>L[I]?A[I]?"error":"success":"default",K=[_t,Ct,kt,Rt,At,It];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-950 to-slate-900 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[f.map(I=>e.jsx(h.div,{className:"absolute w-2 h-2 bg-white/20 rounded-full blur-sm",style:{left:`${I.x}%`,top:`${I.y}%`},animate:{y:[0,-100,0],x:[0,Math.sin(I.id)*50,0],scale:[1,1.5,1],opacity:[.3,.8,.3]},transition:{duration:I.duration,repeat:1/0,delay:I.delay,ease:"easeInOut"}},I.id)),K.map((I,P)=>e.jsx(h.div,{className:"absolute text-white/10",style:{left:`${10+P*15}%`,top:`${20+P%2*60}%`},animate:{y:[0,-20,0],rotate:[0,360],scale:[1,1.2,1]},transition:{duration:8+P*2,repeat:1/0,delay:P*.5,ease:"easeInOut"},children:e.jsx(I,{className:"w-8 h-8"})},P)),e.jsx(h.div,{animate:{x:[0,100,0],y:[0,-100,0],scale:[1,1.3,1],rotate:[0,180,360]},transition:{duration:25,repeat:1/0,ease:"linear"},className:"absolute -top-40 -right-40 w-96 h-96 bg-gradient-to-r from-blue-600/20 to-cyan-600/20 rounded-full blur-3xl"}),e.jsx(h.div,{animate:{x:[0,-100,0],y:[0,100,0],scale:[1,1.2,1],rotate:[360,180,0]},transition:{duration:30,repeat:1/0,ease:"linear"},className:"absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-r from-slate-700/20 to-blue-700/20 rounded-full blur-3xl"})]}),e.jsx(h.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:1,type:"spring",stiffness:100,damping:20},className:"relative z-10 w-full max-w-lg",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-2xl border border-white/30 rounded-3xl p-8 shadow-2xl relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/50 to-transparent"})]}),e.jsxs(h.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},className:"text-center mb-8 relative z-10",children:[e.jsxs(h.div,{whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},animate:{boxShadow:["0 0 30px rgba(255, 255, 255, 0.3)","0 0 50px rgba(255, 255, 255, 0.5)","0 0 30px rgba(255, 255, 255, 0.3)"]},transition:{boxShadow:{duration:3,repeat:1/0,ease:"easeInOut"}},className:"mx-auto w-28 h-28 bg-gradient-to-br from-blue-600 to-blue-800 rounded-3xl flex items-center justify-center mb-6 shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"}),e.jsx(z,{className:"w-14 h-14 text-white drop-shadow-lg relative z-10"}),e.jsx(h.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute inset-2 border-2 border-white/30 rounded-2xl"})]}),e.jsx(h.h1,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.6},className:"text-4xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-2",children:"Moon Light Villa"}),e.jsxs(h.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.6},className:"text-white flex items-center justify-center gap-2 mb-3 text-lg font-medium",children:[e.jsx(Ge,{className:"w-5 h-5"}),d,"! Welcome Back"]}),e.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.6},className:"text-sm text-white opacity-80 flex items-center justify-center gap-2",children:[e.jsx(h.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:"✨"}),c.toLocaleString("en-LK",{weekday:"long",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),e.jsx(h.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,delay:1},children:"✨"})]})]}),e.jsx(U,{children:i&&e.jsx(h.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},className:"mb-6 p-4 bg-red-500/20 border border-red-400/50 rounded-2xl backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:.5,repeat:1/0},children:e.jsx(ee,{className:"w-6 h-6 text-red-300 flex-shrink-0"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-200 font-semibold text-sm",children:"Account Temporarily Locked 🔒"}),e.jsxs("p",{className:"text-red-300 text-sm",children:["Too many failed attempts. Try again in ",k(l)]})]})]})})}),e.jsxs("form",{onSubmit:M(E),className:"space-y-6 relative z-10",children:[e.jsxs(h.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.7,duration:.6},children:[e.jsxs("label",{htmlFor:"username",className:"block text-sm font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"Username"]}),e.jsxs("div",{className:"relative group",children:[e.jsx(h.input,{whileFocus:{scale:1.02},...R("username"),type:"text",id:"username",disabled:i,className:`
                    w-full px-6 py-4 bg-white/10 backdrop-blur-sm border-2 rounded-2xl
                    text-white placeholder-white/60 font-medium text-lg
                    focus:outline-none focus:ring-2 focus:bg-white/15
                    transition-all duration-300 ease-out
                    disabled:opacity-50 disabled:cursor-not-allowed
                    hover:bg-white/15 hover:border-white/40
                    ${O("username")==="error"?"border-red-400/60 focus:ring-red-400/50 focus:border-red-400":O("username")==="success"?"border-green-400/60 focus:ring-green-400/50 focus:border-green-400":"border-white/30 focus:ring-white/30 focus:border-white/50"}
                  `,placeholder:"Enter your username"}),e.jsx(U,{children:L.username&&e.jsx(h.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10",children:O("username")==="success"?e.jsx(h.div,{animate:{scale:[1,1.2,1]},transition:{duration:.5},children:e.jsx(He,{className:"w-6 h-6 text-green-400"})}):O("username")==="error"?e.jsx(h.div,{animate:{shake:[0,-5,5,0]},transition:{duration:.5},children:e.jsx(ee,{className:"w-6 h-6 text-red-400"})}):null})})]}),e.jsx(U,{children:A.username&&e.jsxs(h.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-3 text-sm text-red-300 flex items-center gap-2 bg-red-500/20 p-3 rounded-xl backdrop-blur-sm",children:[e.jsx(ee,{className:"w-4 h-4"}),A.username.message]})})]}),e.jsxs(h.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.8,duration:.6},children:[e.jsxs("label",{htmlFor:"password",className:"block text-sm font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"Password"]}),e.jsxs("div",{className:"relative group",children:[e.jsx(h.input,{whileFocus:{scale:1.02},...R("password"),type:t?"text":"password",id:"password",disabled:i,className:`
                    w-full px-6 pr-16 py-4 bg-white/10 backdrop-blur-sm border-2 rounded-2xl
                    text-white placeholder-white/60 font-medium text-lg
                    focus:outline-none focus:ring-2 focus:bg-white/15
                    transition-all duration-300 ease-out
                    disabled:opacity-50 disabled:cursor-not-allowed
                    hover:bg-white/15 hover:border-white/40
                    ${O("password")==="error"?"border-red-400/60 focus:ring-red-400/50 focus:border-red-400":O("password")==="success"?"border-green-400/60 focus:ring-green-400/50 focus:border-green-400":"border-white/30 focus:ring-white/30 focus:border-white/50"}
                  `,placeholder:"Enter your password"}),e.jsx(h.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>a(!t),disabled:i,className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white hover:text-white transition-all duration-300 disabled:opacity-50 z-10 p-1 rounded-lg hover:bg-white/10",children:t?e.jsx(Le,{className:"w-6 h-6"}):e.jsx(ye,{className:"w-6 h-6"})}),e.jsx(U,{children:L.password&&!t&&e.jsx(h.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute right-14 top-1/2 transform -translate-y-1/2 z-10",children:O("password")==="success"?e.jsx(h.div,{animate:{scale:[1,1.2,1]},transition:{duration:.5},children:e.jsx(He,{className:"w-6 h-6 text-green-400"})}):O("password")==="error"?e.jsx(h.div,{animate:{shake:[0,-5,5,0]},transition:{duration:.5},children:e.jsx(ee,{className:"w-6 h-6 text-red-400"})}):null})})]}),e.jsx(U,{children:A.password&&e.jsxs(h.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-3 text-sm text-red-300 flex items-center gap-2 bg-red-500/20 p-3 rounded-xl backdrop-blur-sm",children:[e.jsx(ee,{className:"w-4 h-4"}),A.password.message]})})]}),e.jsx(U,{children:s>0&&s<5&&e.jsx(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"p-4 bg-yellow-500/20 border border-yellow-400/50 rounded-2xl backdrop-blur-sm",children:e.jsxs("p",{className:"text-yellow-200 text-sm flex items-center gap-2 font-medium",children:[e.jsx(h.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:.5,repeat:1/0},children:e.jsx(ee,{className:"w-5 h-5"})}),s," failed attempt",s>1?"s":"",".",5-s," attempt",5-s>1?"s":""," remaining."]})})}),e.jsx(U,{children:A.root&&e.jsx(h.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},className:"p-4 bg-red-500/20 border border-red-400/50 rounded-2xl backdrop-blur-sm",children:e.jsxs("p",{className:"text-red-200 text-sm flex items-center gap-2 font-medium",children:[e.jsx(h.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:.5,repeat:1/0},children:e.jsx(ee,{className:"w-5 h-5"})}),A.root.message]})})}),e.jsx(h.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.9,duration:.6},children:e.jsxs(h.button,{whileHover:{scale:i?1:1.05,y:i?0:-2},whileTap:{scale:i?1:.98},animate:!i&&!p?{boxShadow:["0 15px 35px rgba(30, 64, 175, 0.5)","0 20px 45px rgba(59, 130, 246, 0.6)","0 15px 35px rgba(30, 64, 175, 0.5)"],background:["linear-gradient(135deg, #1e40af 0%, #2563eb 100%)","linear-gradient(135deg, #2563eb 0%, #3b82f6 100%)","linear-gradient(135deg, #1e40af 0%, #2563eb 100%)"]}:{},transition:{boxShadow:{duration:3,repeat:1/0,ease:"easeInOut"},background:{duration:3,repeat:1/0,ease:"easeInOut"}},type:"submit",disabled:p||i||!S,className:`
                  w-full py-6 px-8 rounded-2xl font-bold text-white text-lg
                  transition-all duration-300 ease-out
                  flex items-center justify-center gap-3
                  disabled:opacity-50 disabled:cursor-not-allowed
                  shadow-2xl relative overflow-hidden group
                  ${i?"bg-gray-600/50":"bg-gradient-to-r from-blue-700 to-blue-900 hover:shadow-3xl transform hover:-translate-y-2 hover:scale-105"}
                `,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/30 via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 transform group-hover:translate-x-full"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-white/20 opacity-0 group-hover:opacity-100 transition-all duration-700 transform -translate-x-full group-hover:translate-x-0"}),e.jsx("div",{className:"relative z-10 flex items-center gap-3",children:p?e.jsxs(e.Fragment,{children:[e.jsx(se,{size:"sm",color:"white"}),e.jsx("span",{children:"Authenticating..."}),e.jsx(h.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:"✨"})]}):i?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-6 h-6"}),e.jsx("span",{children:"Account Locked"}),"🔒"]}):e.jsxs(e.Fragment,{children:[e.jsx(h.div,{animate:{x:[0,3,0]},transition:{duration:2,repeat:1/0},children:e.jsx(Nt,{className:"w-6 h-6"})}),e.jsx("span",{children:"Sign In"}),e.jsx(h.div,{animate:{x:[0,8,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(St,{className:"w-5 h-5"})})]})}),e.jsx(h.div,{className:"absolute inset-0 rounded-2xl",whileHover:{background:["radial-gradient(circle at center, rgba(255,255,255,0) 0%, rgba(255,255,255,0) 100%)","radial-gradient(circle at center, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%)","radial-gradient(circle at center, rgba(255,255,255,0) 0%, rgba(255,255,255,0) 100%)"]},transition:{duration:1.5,repeat:1/0}})]})})]}),e.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.6},className:"mt-8 text-center space-y-6 relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-white opacity-80 text-sm font-medium",children:[e.jsx(h.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:e.jsx(Ge,{className:"w-5 h-5"})}),e.jsx("span",{children:"Enterprise-Grade Security"}),e.jsx(h.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,delay:1},children:"🛡️"})]}),e.jsxs(h.div,{animate:{scale:[1,1.05,1],rotate:[0,1,-1,0]},transition:{duration:4,repeat:1/0},className:"text-white opacity-70 text-sm flex items-center justify-center gap-2",children:["Made with",e.jsx(h.span,{animate:{scale:[1,1.3,1]},transition:{duration:1,repeat:1/0},children:"❤️"}),"for Moon Light Villa - Web App",e.jsx(h.span,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:"✨"})]})]})]})})]})},tt=[{name:"Overview",href:"/admin",icon:nt},{name:"Cashiers",href:"/admin/cashiers",icon:Be},{name:"Bill History",href:"/admin/bills",icon:H},{name:"Rooms",href:"/admin/rooms",icon:z},{name:"Reports",href:"/admin/reports",icon:je}],zs=({children:t})=>{const[a,s]=v.useState(!1),r=Se(),i=Ne(),{user:o,logout:l}=me(),n=()=>{l(),i("/login")};return e.jsxs("div",{className:"min-h-screen bg-dark-950 flex",children:[e.jsx(U,{children:a&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden",onClick:()=>s(!1)})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 z-30",children:e.jsxs("div",{className:"flex flex-col flex-grow bg-gray-800 border-r border-gray-700 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 px-6 py-6 border-b border-gray-700 flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(h.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:4,repeat:1/0},children:e.jsx(z,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-100",children:"Moon Light Villa"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Admin Panel"})]})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:tt.map(c=>{const m=r.pathname===c.href;return e.jsxs(fe,{to:c.href,className:G("flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors duration-200",m?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:[e.jsx(c.icon,{className:"w-5 h-5"}),c.name]},c.name)})}),e.jsxs("div",{className:"p-4 border-t border-gray-700 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-600 rounded-full flex items-center justify-center",children:e.jsx(Ve,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-100 truncate",children:o?.username}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrator"})]})]}),e.jsxs("button",{onClick:n,className:"w-full flex items-center gap-2 px-3 py-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors duration-200",children:[e.jsx(ve,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),e.jsx(U,{children:a&&e.jsx(h.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed inset-y-0 left-0 z-50 w-64 bg-gray-800 border-r border-gray-700 overflow-y-auto md:hidden",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-6 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(h.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:4,repeat:1/0},children:e.jsx(z,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-100",children:"Moon Light Villa"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Admin Panel"})]})]}),e.jsx("button",{onClick:()=>s(!1),className:"p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:tt.map(c=>{const m=r.pathname===c.href;return e.jsxs(fe,{to:c.href,onClick:()=>s(!1),className:G("flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors duration-200",m?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:[e.jsx(c.icon,{className:"w-5 h-5"}),c.name]},c.name)})}),e.jsxs("div",{className:"p-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-600 rounded-full flex items-center justify-center",children:e.jsx(Ve,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-100 truncate",children:o?.username}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrator"})]})]}),e.jsxs("button",{onClick:n,className:"w-full flex items-center gap-2 px-3 py-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors duration-200",children:[e.jsx(ve,{className:"w-4 h-4"}),"Sign Out"]})]})]})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 md:pl-64",children:[e.jsx("header",{className:"bg-gray-800 border-b border-gray-700 px-4 sm:px-6 py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>s(!0),className:"p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors duration-200 md:hidden",children:e.jsx(ot,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["Welcome back, ",o?.username]}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date().toLocaleDateString("en-LK",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})})]})}),e.jsx("main",{className:"flex-1 p-4 sm:p-6 overflow-y-auto bg-gray-900",children:t})]})]})},Fs=()=>{const[t,a]=v.useState(!0);return v.useEffect(()=>{const s=setTimeout(()=>{a(!1)},500);return()=>clearTimeout(s)},[]),t?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-row items-center justify-between gap-4 sm:flex-col sm:items-start sm:gap-3",children:e.jsx("h1",{className:"text-3xl font-bold text-white sm:text-2xl",children:"Admin Overview"})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx(W,{},s))}),e.jsx(W,{})]}):e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsx("div",{className:"flex flex-row items-center justify-between gap-4 sm:flex-col sm:items-start sm:gap-3",children:e.jsx("h1",{className:"text-3xl font-bold text-white sm:text-2xl",children:"Admin Overview"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Be,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Cashiers"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"0"})]})]})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(H,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"0"})]})]})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ze,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"Rs. 0"})]})]})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(je,{className:"w-6 h-6 text-orange-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"Rs. 0"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Welcome to Vila POS Admin Panel"}),e.jsx("p",{className:"text-slate-400 text-base",children:"Manage your hotel operations efficiently with our comprehensive admin dashboard."})]})]})};class $s{getStoredCashiers(){const a=localStorage.getItem("vila-pos-users");return(a?JSON.parse(a):[]).filter(r=>r.role==="cashier")}saveUser(a){const s=localStorage.getItem("vila-pos-users"),r=s?JSON.parse(s):[];if(a.id){const i=r.findIndex(o=>o.id===a.id);i!==-1&&(r[i]={...r[i],...a,updated_at:new Date().toISOString()})}else{const i=Math.max(...r.map(o=>o.id),0)+1;r.push({...a,id:i,role:"cashier",created_at:new Date().toISOString()})}return localStorage.setItem("vila-pos-users",JSON.stringify(r)),a.id?r.find(i=>i.id===a.id):r[r.length-1]}async getAllCashiers(){return new Promise(a=>{setTimeout(()=>{const s=this.getStoredCashiers();a(s.map(({password:r,...i})=>i))},500)})}async createCashier(a){return new Promise((s,r)=>{setTimeout(()=>{try{const i=localStorage.getItem("vila-pos-users");if((i?JSON.parse(i):[]).some(m=>m.username===a.username)){r(new Error("Username already exists"));return}const l=this.saveUser(a),{password:n,...c}=l;s(c)}catch(i){r(i)}},500)})}async updateCashier(a,s){return new Promise((r,i)=>{setTimeout(()=>{try{const o=localStorage.getItem("vila-pos-users");if((o?JSON.parse(o):[]).some(f=>f.username.toLowerCase()===s.username.toLowerCase()&&f.id!==a)){i(new Error("Username already exists"));return}const n=this.saveUser({...s,id:a}),{password:c,...m}=n;r(m)}catch(o){i(o)}},500)})}async deleteCashier(a){return new Promise((s,r)=>{setTimeout(()=>{try{const i=localStorage.getItem("vila-pos-users"),l=(i?JSON.parse(i):[]).filter(n=>n.id!==a);localStorage.setItem("vila-pos-users",JSON.stringify(l)),s()}catch(i){r(i)}},500)})}}const he=new $s,vt=_e(Re((t,a)=>({cashiers:[],isLoading:!1,error:null,fetchCashiers:async()=>{t({isLoading:!0,error:null});try{const s=await he.getAllCashiers();return t({cashiers:s,isLoading:!1}),s}catch(s){const r=s.message||"Failed to fetch cashiers";throw t({error:r,isLoading:!1}),T.error(r),s}},addCashier:async s=>{t({isLoading:!0,error:null});try{const r=await he.createCashier(s);return t(i=>({cashiers:[...i.cashiers,r],isLoading:!1})),T.success("Cashier added successfully"),r}catch(r){const i=r.message||"Failed to add cashier";throw t({error:i,isLoading:!1}),T.error(i),r}},updateCashier:async(s,r)=>{t({isLoading:!0,error:null});try{const i=await he.updateCashier(s,r);return t(o=>({cashiers:o.cashiers.map(l=>l.id===s?i:l),isLoading:!1})),T.success("Cashier updated successfully"),i}catch(i){const o=i.message||"Failed to update cashier";throw t({error:o,isLoading:!1}),T.error(o),i}},deleteCashier:async s=>{t({isLoading:!0,error:null});try{await he.deleteCashier(s),t(r=>({cashiers:r.cashiers.filter(i=>i.id!==s),isLoading:!1})),T.success("Cashier deleted successfully")}catch(r){const i=r.message||"Failed to delete cashier";throw t({error:i,isLoading:!1}),T.error(i),r}},clearError:()=>t({error:null})}),{name:"vila-pos-cashiers",partialize:t=>({cashiers:t.cashiers})})),Ae=({data:t=[],columns:a=[],isLoading:s=!1,searchable:r=!0,sortable:i=!0,filterable:o=!1,pagination:l=!0,pageSize:n=10,className:c="",emptyMessage:m="No data available"})=>{const[f,N]=v.useState(""),[d,g]=v.useState({key:null,direction:"asc"}),[b,p]=v.useState(1),u=v.useMemo(()=>f?t.filter(S=>a.some(L=>{const x=L.accessor?S[L.accessor]:"";return String(x).toLowerCase().includes(f.toLowerCase())})):t,[t,f,a]),w=v.useMemo(()=>d.key?[...u].sort((S,L)=>{const x=S[d.key],_=L[d.key];return x<_?d.direction==="asc"?-1:1:x>_?d.direction==="asc"?1:-1:0}):u,[u,d]),y=v.useMemo(()=>{if(!l)return w;const S=(b-1)*n;return w.slice(S,S+n)},[w,b,n,l]),R=Math.ceil(w.length/n),M=S=>{i&&g(L=>({key:S,direction:L.key===S&&L.direction==="asc"?"desc":"asc"}))},A=S=>d.key!==S?null:d.direction==="asc"?e.jsx(Et,{className:"w-4 h-4"}):e.jsx(Pt,{className:"w-4 h-4"});return s?e.jsx("div",{className:G("card",c),children:e.jsx(Os,{rows:n,columns:a.length})}):e.jsxs("div",{className:G("glass-card overflow-hidden",c),children:[(r||o)&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4 mb-6",children:[r&&e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:f,onChange:S=>N(S.target.value),className:"input-field pl-10"})]}),o&&e.jsxs("button",{className:"btn-secondary flex items-center gap-2 justify-center sm:w-auto",children:[e.jsx(Lt,{className:"w-4 h-4"}),"Filters"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-white/20 bg-gradient-to-r from-slate-800/50 to-slate-700/50",children:a.map((S,L)=>e.jsx("th",{className:G("text-left py-6 px-4 sm:px-6 font-bold text-white text-sm sm:text-base whitespace-nowrap",i&&S.sortable!==!1&&"cursor-pointer hover:text-white",S.className),onClick:()=>S.sortable!==!1&&M(S.accessor),children:e.jsxs("div",{className:"flex items-center gap-3",children:[S.header,i&&S.sortable!==!1&&A(S.accessor)]})},L))})}),e.jsx("tbody",{children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:a.length,className:"text-center py-12 text-slate-400 text-base",children:m})}):y.map((S,L)=>e.jsx(h.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:L*.05},className:"border-b border-white/10 hover:bg-gradient-to-r hover:from-blue-500/10 hover:to-purple-500/10 transition-all duration-300 hover:shadow-lg",children:a.map((x,_)=>e.jsx("td",{className:G("py-4 px-4 sm:px-6 text-sm sm:text-base whitespace-nowrap",x.cellClassName),children:x.render?x.render(S[x.accessor],S,L):S[x.accessor]},_))},S.id||L))})]})}),l&&R>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4 mt-6 pt-6 border-t border-white/20",children:[e.jsxs("div",{className:"text-xs sm:text-sm text-white/70 order-2 sm:order-1",children:["Showing ",(b-1)*n+1," to ",Math.min(b*n,w.length)," of ",w.length," results"]}),e.jsxs("div",{className:"flex items-center gap-2 order-1 sm:order-2",children:[e.jsx("button",{onClick:()=>p(S=>Math.max(S-1,1)),disabled:b===1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm px-2 py-1 sm:px-3 sm:py-2",children:"Previous"}),Array.from({length:Math.min(5,R)},(S,L)=>{const x=L+1;return e.jsx("button",{onClick:()=>p(x),className:G("px-2 py-1 sm:px-3 sm:py-2 rounded-lg font-medium transition-colors text-xs sm:text-sm",b===x?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":"text-white/70 hover:text-white hover:bg-white/10"),children:x},x)}),e.jsx("button",{onClick:()=>p(S=>Math.min(S+1,R)),disabled:b===R,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm px-2 py-1 sm:px-3 sm:py-2",children:"Next"})]})]})]})},Ue=({isOpen:t,onClose:a,title:s,children:r,size:i="md",className:o="",showCloseButton:l=!0,closeOnOverlayClick:n=!0,closeOnEscape:c=!0})=>{const m={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-7xl"};v.useEffect(()=>{if(!c)return;const N=d=>{d.key==="Escape"&&t&&a()};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[t,a,c]),v.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]);const f=N=>{n&&N.target===N.currentTarget&&a()};return e.jsx(U,{children:t&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 sm:p-4",children:[e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:f}),e.jsxs(h.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:G("relative w-full bg-gray-800/95 backdrop-blur-xl border border-gray-700/50 rounded-3xl shadow-2xl max-h-[90vh] overflow-y-auto",m[i],o),children:[(s||l)&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700/50 flex-shrink-0 lg:p-4 bg-gradient-to-r from-blue-600/10 to-purple-600/10",children:[s&&e.jsx("h2",{className:"text-xl font-bold text-white lg:text-lg",children:s}),l&&e.jsx("button",{onClick:a,className:"p-2 text-slate-400 hover:text-white hover:bg-gray-700/50 rounded-xl transition-all duration-300 hover:scale-110",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 flex-1 overflow-y-auto lg:p-4",children:r})]})]})})},Us=()=>{const{cashiers:t,isLoading:a,fetchCashiers:s,addCashier:r,updateCashier:i,deleteCashier:o}=vt(),[l,n]=v.useState(!1),[c,m]=v.useState(null),[f,N]=v.useState(!1),[d,g]=v.useState({username:"",full_name:"",email:"",password:"",isActive:!0}),[b,p]=v.useState({});v.useEffect(()=>{s()},[]);const u=()=>{const x={};return d.username.trim()?d.username.length<3&&(x.username="Username must be at least 3 characters"):x.username="Username is required",d.full_name.trim()||(x.full_name="Full name is required"),!c&&!d.password.trim()?x.password="Password is required":d.password&&d.password.length<6&&(x.password="Password must be at least 6 characters"),d.email&&!/\S+@\S+\.\S+/.test(d.email)&&(x.email="Invalid email format"),p(x),Object.keys(x).length===0},w=async x=>{if(x.preventDefault(),!!u()){N(!0);try{if(c){const _={...d};_.password||delete _.password,await i(c.id,_)}else await r(d);M()}catch(_){console.error("Error saving cashier:",_)}finally{N(!1)}}},y=x=>{m(x),g({username:x.username,full_name:x.full_name||x.username,email:x.email,password:"",isActive:x.isActive}),n(!0)},R=async x=>{if(window.confirm("Are you sure you want to delete this cashier?"))try{await o(x)}catch(_){console.error("Error deleting cashier:",_)}},M=()=>{n(!1),m(null),g({username:"",full_name:"",email:"",password:"",isActive:!0}),p({})},A=x=>{const{name:_,value:j,type:E,checked:k}=x.target;g(O=>({...O,[_]:E==="checkbox"?k:j})),b[_]&&p(O=>({...O,[_]:""}))},S=async x=>{try{const _=t.find(j=>j.id===x);_&&await i(x,{..._,isActive:!_.isActive})}catch(_){console.error("Error updating cashier status:",_)}},L=[{header:"Username",accessor:"username",render:x=>e.jsx("div",{className:"font-medium text-white",children:x})},{header:"Full Name",accessor:"full_name",render:x=>e.jsx("div",{className:"text-slate-300",children:x||"N/A"})},{header:"Email",accessor:"email",render:x=>e.jsx("div",{className:"text-slate-300",children:x||"N/A"})},{header:"Status",accessor:"isActive",render:x=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x?"bg-green-900/30 text-green-400 border border-green-800":"bg-red-900/30 text-red-400 border border-red-800"}`,children:x?"Active":"Inactive"})},{header:"Created",accessor:"createdAt",render:x=>e.jsx("div",{className:"text-slate-400 text-sm",children:new Date(x).toLocaleDateString()})},{header:"Last Login",accessor:"lastLogin",render:x=>e.jsx("div",{className:"text-slate-400 text-sm",children:x?new Date(x).toLocaleDateString():"Never"})},{header:"Actions",accessor:"id",sortable:!1,render:(x,_)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>S(x),className:"p-1 rounded-lg hover:bg-dark-700 transition-colors",title:_.isActive?"Deactivate":"Activate",children:_.isActive?e.jsx(Le,{className:"w-4 h-4 text-slate-400"}):e.jsx(ye,{className:"w-4 h-4 text-slate-400"})}),e.jsx("button",{onClick:()=>y(_),className:"p-1 rounded-lg hover:bg-dark-700 transition-colors",title:"Edit",children:e.jsx(lt,{className:"w-4 h-4 text-slate-400"})}),e.jsx("button",{onClick:()=>R(x),className:"p-1 rounded-lg hover:bg-dark-700 transition-colors",title:"Delete",children:e.jsx(ct,{className:"w-4 h-4 text-red-400"})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Cashier Management"}),e.jsx("p",{className:"text-slate-400",children:"Manage cashier accounts and permissions"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Add Cashier"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:e.jsx(Be,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Cashiers"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.length})]})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-600/20 rounded-lg",children:e.jsx(ye,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.filter(x=>x.isActive).length})]})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-600/20 rounded-lg",children:e.jsx(Le,{className:"w-6 h-6 text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.filter(x=>!x.isActive).length})]})]})})]}),a?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:[1,2,3].map(x=>e.jsx(W,{},x))}):e.jsx(Ae,{data:t,columns:L,isLoading:!1,emptyMessage:"No cashiers found",searchable:!0,sortable:!0,pagination:!0,pageSize:10}),e.jsx(Ue,{isOpen:l,onClose:()=>{n(!1),m(null),g({name:"",email:"",password:"",isActive:!0})},title:c?"Edit Cashier":"Add New Cashier",children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Username"}),e.jsx("input",{type:"text",name:"username",value:d.username||"",onChange:A,className:`input-field ${b.username?"border-red-500":""}`,placeholder:"Enter username",required:!0}),b.username&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:b.username})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",name:"full_name",value:d.full_name||"",onChange:A,className:`input-field ${b.full_name?"border-red-500":""}`,placeholder:"Enter full name",required:!0}),b.full_name&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:b.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:d.email||"",onChange:A,className:`input-field ${b.email?"border-red-500":""}`,placeholder:"Enter email (optional)"}),b.email&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:b.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Password ",c&&"(leave blank to keep current)"]}),e.jsx("input",{type:"password",name:"password",value:d.password||"",onChange:A,className:`input-field ${b.password?"border-red-500":""}`,placeholder:"Enter password",required:!c}),b.password&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:b.password})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:d.isActive,onChange:A,className:"rounded border-slate-600 bg-dark-800 text-primary-600 focus:ring-primary-600"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-slate-300",children:"Active"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:M,className:"btn-secondary flex-1",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1 flex items-center justify-center gap-2",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx(se,{size:"sm",color:"white"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs("span",{children:[c?"Update":"Add"," Cashier"]})})]})]})})]})},qs=()=>e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-8 h-8 text-primary-500"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Bill History"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search bills...",className:"input-field pl-10 w-64"})]})]}),e.jsx("div",{className:"card",children:e.jsx("p",{className:"text-slate-400 text-center py-8",children:"Bill history functionality will be implemented here."})})]});class Gs{constructor(){this.initializeDefaultRooms()}initializeDefaultRooms(){if(this.getStoredRooms().length===0){const s=[{id:1,room_number:"101",room_type:"ac",price_per_day:8500,description:"Deluxe AC Room with Sea View",is_active:!0,created_at:new Date().toISOString()},{id:2,room_number:"102",room_type:"non_ac",price_per_day:6500,description:"Standard Non-AC Room",is_active:!0,created_at:new Date().toISOString()},{id:3,room_number:"201",room_type:"ac",price_per_day:12e3,description:"Premium AC Suite",is_active:!0,created_at:new Date().toISOString()}];localStorage.setItem("vila-pos-rooms-data",JSON.stringify(s))}}getStoredRooms(){const a=localStorage.getItem("vila-pos-rooms-data");return a?JSON.parse(a):[]}saveRooms(a){localStorage.setItem("vila-pos-rooms-data",JSON.stringify(a))}async getAllRooms(){return new Promise(a=>{setTimeout(()=>{const s=this.getStoredRooms().filter(r=>r.is_active);a(s)},500)})}async createRoom(a){return new Promise((s,r)=>{setTimeout(()=>{try{const i=this.getStoredRooms();if(i.some(n=>n.room_number===a.room_number&&n.is_active)){r(new Error("Room number already exists"));return}const o=Math.max(...i.map(n=>n.id),0)+1,l={...a,id:o,is_active:!0,created_at:new Date().toISOString()};i.push(l),this.saveRooms(i),s(l)}catch(i){r(i)}},500)})}async updateRoom(a,s){return new Promise((r,i)=>{setTimeout(()=>{try{const o=this.getStoredRooms();if(o.some(n=>n.room_number===s.room_number&&n.id!==a&&n.is_active)){i(new Error("Room number already exists"));return}const l=o.findIndex(n=>n.id===a);l!==-1?(o[l]={...o[l],...s,updated_at:new Date().toISOString()},this.saveRooms(o),r(o[l])):i(new Error("Room not found"))}catch(o){i(o)}},500)})}async deleteRoom(a){return new Promise(s=>{setTimeout(()=>{const r=this.getStoredRooms(),i=r.findIndex(o=>o.id===a);i!==-1&&(r[i].is_active=!1,this.saveRooms(r)),s()},500)})}}const ue=new Gs,ie=_e(Re((t,a)=>({rooms:[],isLoading:!1,error:null,fetchRooms:async()=>{t({isLoading:!0,error:null});try{const s=await ue.getAllRooms();return t({rooms:s,isLoading:!1}),s}catch(s){const r=s.message||"Failed to fetch rooms";throw t({error:r,isLoading:!1}),T.error(r),s}},addRoom:async s=>{t({isLoading:!0,error:null});try{const r=await ue.createRoom(s);return t(i=>({rooms:[...i.rooms,r],isLoading:!1})),T.success("Room added successfully"),r}catch(r){const i=r.message||"Failed to add room";throw t({error:i,isLoading:!1}),T.error(i),r}},updateRoom:async(s,r)=>{t({isLoading:!0,error:null});try{const i=await ue.updateRoom(s,r);return t(o=>({rooms:o.rooms.map(l=>l.id===s?i:l),isLoading:!1})),T.success("Room updated successfully"),i}catch(i){const o=i.message||"Failed to update room";throw t({error:o,isLoading:!1}),T.error(o),i}},deleteRoom:async s=>{t({isLoading:!0,error:null});try{await ue.deleteRoom(s),t(r=>({rooms:r.rooms.filter(i=>i.id!==s),isLoading:!1})),T.success("Room deleted successfully")}catch(r){const i=r.message||"Failed to delete room";throw t({error:i,isLoading:!1}),T.error(i),r}},clearError:()=>t({error:null})}),{name:"vila-pos-rooms",partialize:t=>({rooms:t.rooms})})),st={code:"LKR",symbol:"Rs.",name:"Sri Lankan Rupee"},$=(t,a={})=>{const{showSymbol:s=!0,showCode:r=!1,decimals:i=2,locale:o="en-LK"}=a;let n=new Intl.NumberFormat(o,{minimumFractionDigits:i,maximumFractionDigits:i}).format(Number(t)||0);return s&&(n=`${st.symbol} ${n}`),r&&(n=`${n} ${st.code}`),n},Hs=()=>{const{rooms:t,isLoading:a,error:s,fetchRooms:r,addRoom:i,updateRoom:o,deleteRoom:l}=ie(),[n,c]=v.useState(!1),[m,f]=v.useState(null),[N,d]=v.useState(!1),[g,b]=v.useState({room_number:"",room_type:"ac",price_per_day:"",description:"",is_active:!0}),[p,u]=v.useState({});v.useEffect(()=>{r()},[r]);const w=()=>{const j={};return g.room_number.trim()||(j.room_number="Room number is required"),(!g.price_per_day||g.price_per_day<=0)&&(j.price_per_day="Valid price per day is required"),u(j),Object.keys(j).length===0},y=async j=>{if(j.preventDefault(),!!w()){d(!0);try{const E={...g,price_per_day:parseFloat(g.price_per_day)};m?await o(m.id,E):await i(E),A()}catch(E){console.error("Error saving room:",E)}finally{d(!1)}}},R=j=>{f(j),b({room_number:j.room_number,room_type:j.room_type,price_per_day:j.price_per_day.toString(),description:j.description||"",is_active:j.is_active}),c(!0)},M=async j=>{if(window.confirm("Are you sure you want to delete this room?"))try{await l(j)}catch(E){console.error("Error deleting room:",E)}},A=()=>{c(!1),f(null),b({room_number:"",room_type:"ac",price_per_day:"",description:"",is_active:!0}),u({})},S=j=>{const{name:E,value:k,type:O,checked:K}=j.target;b(I=>({...I,[E]:O==="checkbox"?K:k})),p[E]&&u(I=>({...I,[E]:""}))},L=j=>j==="ac"?"AC Room":"Non-AC Room",x=j=>j?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-900/30 text-green-400 border border-green-800",children:"Active"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-900/30 text-red-400 border border-red-800",children:"Inactive"}),_=[{header:"Room Number",accessor:"room_number",render:(j,E)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(z,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-white",children:E.room_number}),e.jsx("p",{className:"text-xs text-slate-400",children:L(E.room_type)})]})]})},{header:"Type",accessor:"room_type",render:j=>e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${j==="ac"?"bg-blue-900/30 text-blue-400 border border-blue-800":"bg-orange-900/30 text-orange-400 border border-orange-800"}`,children:L(j)})},{header:"Price Per Day",accessor:"price_per_day",render:j=>e.jsx("span",{className:"font-semibold text-green-400",children:$(j)})},{header:"Status",accessor:"is_active",render:j=>x(j)},{header:"Description",accessor:"description",render:j=>e.jsx("span",{className:"text-slate-300 text-sm",children:j||"No description"})},{header:"Actions",accessor:"id",sortable:!1,render:(j,E)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>R(E),className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 rounded-lg transition-colors",title:"Edit Room",children:e.jsx(lt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>M(E.id),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition-colors",title:"Delete Room",children:e.jsx(ct,{className:"w-4 h-4"})})]})}];return s?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Room Management"})}),e.jsx("div",{className:"card bg-red-900/20 border-red-800",children:e.jsxs("p",{className:"text-red-400",children:["Error loading rooms: ",s]})})]}):e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Room Management"}),e.jsx("p",{className:"text-slate-400",children:"Manage hotel rooms and pricing"})]}),e.jsxs("button",{onClick:()=>c(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(Dt,{className:"w-4 h-4"}),"Add Room"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:e.jsx(z,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Rooms"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.length})]})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-600/20 rounded-lg",children:e.jsx(we,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Active Rooms"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.filter(j=>j.is_active).length})]})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:e.jsx(we,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"AC Rooms"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.filter(j=>j.room_type==="ac").length})]})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-600/20 rounded-lg",children:e.jsx(Ee,{className:"w-6 h-6 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Non-AC Rooms"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.filter(j=>j.room_type==="non_ac").length})]})]})})]}),a?e.jsx(W,{}):e.jsx(Ae,{data:t,columns:_,isLoading:!1,emptyMessage:"No rooms found. Add your first room to get started.",searchable:!0,sortable:!0,pagination:!0,pageSize:10}),e.jsx(Ue,{isOpen:n,onClose:A,title:m?"Edit Room":"Add New Room",size:"md",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room_number",className:"block text-sm font-medium text-slate-300 mb-2",children:"Room Number *"}),e.jsx("input",{type:"text",id:"room_number",name:"room_number",value:g.room_number,onChange:S,className:`input-field ${p.room_number?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"e.g., 101, A1, etc."}),p.room_number&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:p.room_number})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"room_type",className:"block text-sm font-medium text-slate-300 mb-2",children:"Room Type *"}),e.jsxs("select",{id:"room_type",name:"room_type",value:g.room_type,onChange:S,className:"input-field",children:[e.jsx("option",{value:"ac",children:"AC Room"}),e.jsx("option",{value:"non_ac",children:"Non-AC Room"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price_per_day",className:"block text-sm font-medium text-slate-300 mb-2",children:"Price Per Day (Rs.) *"}),e.jsx("input",{type:"number",id:"price_per_day",name:"price_per_day",value:g.price_per_day,onChange:S,min:"0",step:"0.01",className:`input-field ${p.price_per_day?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"0.00"}),p.price_per_day&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:p.price_per_day})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-300 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:g.description,onChange:S,rows:"3",className:"input-field",placeholder:"Room description..."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",name:"is_active",checked:g.is_active,onChange:S,className:"rounded border-slate-600 bg-dark-800 text-primary-600 focus:ring-primary-600"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-slate-300",children:"Active Room"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:A,className:"btn-secondary flex-1",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1 flex items-center justify-center gap-2",disabled:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx(se,{size:"sm",color:"white"}),e.jsx("span",{children:"Saving..."})]}):e.jsx("span",{children:m?"Update Room":"Add Room"})})]})]})})]})},Ws=()=>e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{className:"w-8 h-8 text-primary-500"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Reports & Analytics"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Je,{className:"w-5 h-5 text-slate-400"}),e.jsx("input",{type:"date",className:"input-field"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ze,{className:"w-6 h-6 text-green-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Revenue Report"})]}),e.jsx("p",{className:"text-slate-400",children:"Revenue analytics will be displayed here."})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(je,{className:"w-6 h-6 text-blue-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Occupancy Report"})]}),e.jsx("p",{className:"text-slate-400",children:"Room occupancy statistics will be shown here."})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Je,{className:"w-6 h-6 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Monthly Summary"})]}),e.jsx("p",{className:"text-slate-400",children:"Monthly performance summary will be displayed here."})]})]})]});class Vs{getStoredBills(){const a=localStorage.getItem("vila-pos-bills-data");return a?JSON.parse(a):[]}saveBills(a){localStorage.setItem("vila-pos-bills-data",JSON.stringify(a))}generateBillNumber(){const s=new Date().toISOString().slice(0,10).replace(/-/g,""),o=this.getStoredBills().filter(l=>l.bill_number.startsWith(`VB${s}`)).length+1;return`VB${s}${o.toString().padStart(3,"0")}`}async getAllBills(){return new Promise(a=>{setTimeout(()=>{const s=this.getStoredBills();a(s)},500)})}async createBill(a){return new Promise(s=>{setTimeout(()=>{const r=this.getStoredBills(),i=JSON.parse(localStorage.getItem("vila-pos-rooms-data")||"[]"),o=Math.max(...r.map(d=>d.id),0)+1,l=new Date(a.check_in_date),n=new Date(a.check_out_date),c=Math.ceil((n-l)/(1e3*60*60*24)),m=c*a.price_per_day,f=i.find(d=>d.id===a.room_id),N={...a,id:o,bill_number:a.bill_number||this.generateBillNumber(),days:c,total_amount:m,room_number:f?.room_number||"N/A",room_type:f?.room_type||"N/A",created_at:new Date().toISOString()};r.push(N),this.saveBills(r),s(N)},500)})}async deleteBill(a){return new Promise(s=>{setTimeout(()=>{const i=this.getStoredBills().filter(o=>o.id!==a);this.saveBills(i),s()},500)})}async getBillById(a){return new Promise(s=>{setTimeout(()=>{const i=this.getStoredBills().find(o=>o.id===a);s(i)},300)})}}const ge=new Vs,xe=_e(Re((t,a)=>({bills:[],isLoading:!1,error:null,stats:{totalBills:0,totalRevenue:0,todayBills:0,todayRevenue:0},fetchBills:async()=>{t({isLoading:!0,error:null});try{const s=await ge.getAllBills(),r=a().calculateStats(s);return t({bills:s,stats:r,isLoading:!1}),s}catch(s){const r=s.message||"Failed to fetch bills";throw t({error:r,isLoading:!1}),T.error(r),s}},createBill:async s=>{t({isLoading:!0,error:null});try{const r=await ge.createBill(s);return t(i=>{const o=[...i.bills,r],l=i.calculateStats(o);return{bills:o,stats:l,isLoading:!1}}),T.success("Bill created successfully"),r}catch(r){const i=r.message||"Failed to create bill";throw t({error:i,isLoading:!1}),T.error(i),r}},deleteBill:async s=>{t({isLoading:!0,error:null});try{await ge.deleteBill(s),t(r=>{const i=r.bills.filter(l=>l.id!==s),o=r.calculateStats(i);return{bills:i,stats:o,isLoading:!1}}),T.success("Bill deleted successfully")}catch(r){const i=r.message||"Failed to delete bill";throw t({error:i,isLoading:!1}),T.error(i),r}},calculateStats:s=>{const r=new Date().toDateString(),i=s.filter(o=>new Date(o.created_at).toDateString()===r);return{totalBills:s.length,totalRevenue:s.reduce((o,l)=>o+parseFloat(l.total_amount),0),todayBills:i.length,todayRevenue:i.reduce((o,l)=>o+parseFloat(l.total_amount),0)}},clearError:()=>t({error:null})}),{name:"vila-pos-bills",partialize:t=>({bills:t.bills})})),Js=()=>{const{fetchCashiers:t}=vt(),{fetchBills:a}=xe(),{fetchRooms:s}=ie();return v.useEffect(()=>{(async()=>{try{await Promise.all([t(),a(),s()])}catch(i){console.error("Failed to initialize admin dashboard data:",i)}})()},[t,a,s]),e.jsx(zs,{children:e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsxs(Me,{children:[e.jsx(F,{index:!0,element:e.jsx(Fs,{})}),e.jsx(F,{path:"cashiers",element:e.jsx(Us,{})}),e.jsx(F,{path:"bills",element:e.jsx(qs,{})}),e.jsx(F,{path:"rooms",element:e.jsx(Hs,{})}),e.jsx(F,{path:"reports",element:e.jsx(Ws,{})}),e.jsx(F,{path:"*",element:e.jsx(te,{to:"/admin",replace:!0})})]})})})},rt=[{name:"Overview",href:"/cashier",icon:nt},{name:"Create Bill",href:"/cashier/create-bill",icon:ce},{name:"Bills",href:"/cashier/bills",icon:H},{name:"Rooms",href:"/cashier/rooms",icon:z}],Ks=({children:t})=>{const[a,s]=v.useState(!1),r=Se(),i=Ne(),{user:o,logout:l}=me(),n=()=>{l(),i("/login")};return e.jsxs("div",{className:"min-h-screen bg-dark-950 flex",children:[e.jsx(U,{children:a&&e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden",onClick:()=>s(!1)})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 z-30",children:e.jsxs("div",{className:"flex flex-col flex-grow bg-gray-800 border-r border-gray-700 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 px-6 py-6 border-b border-gray-700 flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(h.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:4,repeat:1/0},children:e.jsx(z,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-100",children:"Moon Light Villa"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Cashier Panel"})]})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:rt.map(c=>{const m=r.pathname===c.href;return e.jsxs(fe,{to:c.href,className:G("flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors duration-200",m?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:[e.jsx(c.icon,{className:"w-5 h-5"}),c.name]},c.name)})}),e.jsxs("div",{className:"p-4 border-t border-gray-700 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(be,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-100 truncate",children:o?.username}),e.jsx("p",{className:"text-xs text-gray-400",children:"Cashier"})]})]}),e.jsxs("button",{onClick:n,className:"w-full flex items-center gap-2 px-3 py-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors duration-200",children:[e.jsx(ve,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),e.jsx(U,{children:a&&e.jsx(h.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed inset-y-0 left-0 z-50 w-64 bg-gray-800 border-r border-gray-700 overflow-y-auto md:hidden",children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-6 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(h.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:4,repeat:1/0},children:e.jsx(z,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-100",children:"Moon Light Villa"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Cashier Panel"})]})]}),e.jsx("button",{onClick:()=>s(!1),className:"p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors duration-200",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:rt.map(c=>{const m=r.pathname===c.href;return e.jsxs(fe,{to:c.href,onClick:()=>s(!1),className:G("flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors duration-200",m?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:[e.jsx(c.icon,{className:"w-5 h-5"}),c.name]},c.name)})}),e.jsxs("div",{className:"p-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(be,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-100 truncate",children:o?.username}),e.jsx("p",{className:"text-xs text-gray-400",children:"Cashier"})]})]}),e.jsxs("button",{onClick:n,className:"w-full flex items-center gap-2 px-3 py-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors duration-200",children:[e.jsx(ve,{className:"w-4 h-4"}),"Sign Out"]})]})]})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 md:pl-64",children:[e.jsx("header",{className:"bg-gray-800 border-b border-gray-700 px-4 sm:px-6 py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>s(!0),className:"p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-lg transition-colors duration-200 md:hidden",children:e.jsx(ot,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:["Welcome, ",o?.username]}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date().toLocaleDateString("en-LK",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})})]})}),e.jsx("main",{className:"flex-1 p-4 sm:p-6 overflow-y-auto bg-gray-900",children:t})]})]})},Ys=()=>{const t=Ne(),[a,s]=v.useState(!0),{bills:r,stats:i,fetchBills:o}=xe(),{rooms:l,fetchRooms:n}=ie();v.useEffect(()=>{(async()=>{s(!0);try{await Promise.all([o(),n()])}catch(f){console.error("Error loading data:",f)}finally{s(!1)}})()},[o,n]);const c=l.filter(m=>m.is_active);return a?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-row items-center justify-between gap-4 sm:flex-col sm:items-start sm:gap-3",children:e.jsx("h1",{className:"text-3xl font-bold text-white sm:text-2xl",children:"Cashier Dashboard"})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(m=>e.jsx(W,{},m))}),e.jsx(W,{})]}):e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 sm:flex-col sm:items-start sm:gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold text-white sm:text-2xl",children:"Cashier Dashboard"}),e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Today"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:new Date().toLocaleDateString("en-LK")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(H,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Today's Bills"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:i.todayBills})]})]})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ze,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Today's Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:$(i.todayRevenue)})]})]})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(z,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Available Rooms"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:c.length})]})]})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Mt,{className:"w-6 h-6 text-orange-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Active Session"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:new Date().toLocaleTimeString("en-LK",{hour:"2-digit",minute:"2-digit"})})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-1 lg:gap-3",children:[e.jsx(h.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>t("/cashier/create-bill"),className:"btn-primary text-left p-4 h-auto",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-base",children:"Create New Bill"}),e.jsx("p",{className:"text-sm opacity-80",children:"Generate a new customer bill"})]})]})}),e.jsx(h.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>t("/cashier/rooms"),className:"btn-secondary text-left p-4 h-auto",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-base",children:"View Rooms"}),e.jsx("p",{className:"text-sm opacity-80",children:"Check room availability"})]})]})})]})]})]})},Xs=(t,a="yyyy-MM-dd")=>{if(!t)return"";try{const s=typeof t=="string"?new Date(t):t;return isNaN(s.getTime())?"":a==="yyyy-MM-dd"?s.toISOString().split("T")[0]:a==="MMM dd, yyyy"?s.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}):a==="MMM dd, yyyy HH:mm"?s.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):s.toLocaleDateString()}catch(s){return console.error("Date formatting error:",s),""}},Q=t=>Xs(t,"MMM dd, yyyy"),Qs=(t,a)=>{if(!t||!a)return 0;try{const s=typeof t=="string"?new Date(t):t,r=typeof a=="string"?new Date(a):a;if(isNaN(s.getTime())||isNaN(r.getTime()))return 0;const i=r.getTime()-s.getTime(),o=Math.ceil(i/(1e3*3600*24));return Math.max(o,1)}catch(s){return console.error("Date calculation error:",s),0}},Zs=()=>{const[t,a]=v.useState(null),[s,r]=v.useState(0),[i,o]=v.useState(0),[l,n]=v.useState(""),[c,m]=v.useState(!0),{rooms:f,fetchRooms:N}=ie(),{createBill:d,isLoading:g}=xe(),{register:b,handleSubmit:p,formState:{errors:u},watch:w,setValue:y,reset:R}=dt({resolver:ht(rs)}),M=w(["room_id","check_in_date","check_out_date"]);v.useEffect(()=>{(async()=>{m(!0);try{await N(),A()}catch(_){console.error("Error loading rooms:",_)}finally{m(!1)}})()},[N]);const A=()=>{const x=ge.generateBillNumber();n(x)};v.useEffect(()=>{const[x,_,j]=M;if(x&&_&&j){const E=f.find(k=>k.id===parseInt(x));if(E){a(E);const k=Qs(_,j),O=k*parseFloat(E.price_per_day);r(k),o(O),y("price_per_day",E.price_per_day)}}else a(null),r(0),o(0)},[M,f,y]);const S=async x=>{try{const _={...x,bill_number:l,room_id:parseInt(x.room_id),price_per_day:parseFloat(x.price_per_day),days:s,total_amount:i,created_by:1};await d(_),R(),A(),a(null),r(0),o(0)}catch(_){console.error("Error creating bill:",_)}},L=()=>{R(),a(null),r(0),o(0),A()};return c?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-row items-center justify-between gap-4 sm:flex-col sm:items-start sm:gap-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{className:"w-8 h-8 text-blue-500"}),e.jsx("h1",{className:"text-3xl font-bold text-white sm:text-2xl",children:"Create New Bill"})]})}),[1,2,3,4].map(x=>e.jsx(W,{},x))]}):e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 sm:flex-col sm:items-start sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ce,{className:"w-8 h-8 text-blue-500"}),e.jsx("h1",{className:"text-3xl font-bold text-white sm:text-2xl",children:"Create New Bill"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[e.jsx(Ke,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Bill Calculator"})]})]}),e.jsxs("form",{onSubmit:p(S),className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(ce,{className:"w-6 h-6 text-primary-500"}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Bill Information"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-1 lg:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Bill Number"}),e.jsx("input",{type:"text",value:l,readOnly:!0,className:"input-field bg-dark-700 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Date"}),e.jsx("input",{type:"text",value:new Date().toLocaleDateString("en-LK"),readOnly:!0,className:"input-field bg-dark-700 cursor-not-allowed"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(be,{className:"w-6 h-6 text-blue-500"}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Customer Information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Customer Name *"}),e.jsx("input",{...b("customer_name"),type:"text",className:"input-field",placeholder:"Enter customer name"}),u.customer_name&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u.customer_name.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-1 lg:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Phone Number"}),e.jsx("input",{...b("customer_phone"),type:"tel",className:"input-field",placeholder:"Enter phone number"}),u.customer_phone&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u.customer_phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Address"}),e.jsx("input",{...b("customer_address"),type:"text",className:"input-field",placeholder:"Enter customer address"}),u.customer_address&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u.customer_address.message})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(z,{className:"w-6 h-6 text-green-500"}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Booking Details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Room Selection *"}),e.jsxs("select",{...b("room_id"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select a room"}),f.map(x=>e.jsxs("option",{value:x.id,children:[x.room_number," - ",x.room_type==="ac"?"AC Room":"Non-AC Room","(",$(x.price_per_day),"/day)"]},x.id))]}),u.room_id&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u.room_id.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-1 lg:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Check-in Date *"}),e.jsx("input",{...b("check_in_date"),type:"date",min:new Date().toISOString().split("T")[0],className:"input-field"}),u.check_in_date&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u.check_in_date.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Check-out Date *"}),e.jsx("input",{...b("check_out_date"),type:"date",min:new Date().toISOString().split("T")[0],className:"input-field"}),u.check_out_date&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u.check_out_date.message})]})]})]})]}),t&&s>0&&e.jsxs(h.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"card bg-gradient-to-r from-primary-900/20 to-purple-900/20 border-primary-500/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ke,{className:"w-6 h-6 text-primary-400"}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Calculation Summary"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 lg:grid-cols-1 lg:gap-3",children:[e.jsxs("div",{className:"text-center p-4 bg-dark-800/50 rounded-xl",children:[e.jsx("p",{className:"text-slate-400 text-sm mb-1",children:"Number of Days"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:s})]}),e.jsxs("div",{className:"text-center p-4 bg-dark-800/50 rounded-xl",children:[e.jsx("p",{className:"text-slate-400 text-sm mb-1",children:"Rate per Day"}),e.jsx("p",{className:"text-2xl font-bold text-primary-400",children:$(t.price_per_day)})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-primary-600/20 to-purple-600/20 rounded-xl border border-primary-500/30",children:[e.jsx("p",{className:"text-slate-400 text-sm mb-1",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold text-primary-300",children:$(i)})]})]})]}),e.jsxs("div",{className:"flex flex-row gap-4 pt-4 lg:flex-col",children:[e.jsx("button",{type:"button",onClick:L,disabled:g,className:"btn-secondary w-auto order-2 lg:w-full lg:order-1",children:"Reset Form"}),e.jsx("button",{type:"submit",disabled:g||!t||s===0,className:"btn-primary flex-1 order-1 flex items-center justify-center gap-2 lg:w-full lg:order-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx(se,{size:"sm",color:"white"}),e.jsx("span",{children:"Creating Bill..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Bill"})]})})]})]})]})},er=t=>`<!DOCTYPE html>
<html>
  <head>
    <title>Bill ${t.bill_number}</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      * { -webkit-print-color-adjust: exact !important; box-sizing: border-box; }
      body {
        font-family: 'Poppins', sans-serif;
        background: #fdfdfd;
        color: #2d3748;
        margin: 0;
        padding: 20px;
        font-size: 14px;
      }
      .bill-container {
        max-width: 800px;
        margin: auto;
        background: #fff;
        padding: 28px;
        border-radius: 18px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      }
      /* Header */
      .bill-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 3px solid #06b6d4;
        padding-bottom: 18px;
        margin-bottom: 24px;
      }
      .bill-logo {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .bill-logo img {
        width: 60px;
        height: 60px;
      }
      .bill-logo h1 {
        font-size: 22px;
        font-weight: 700;
        color: #0e7490;
        margin: 0;
      }
      .bill-meta {
        text-align: right;
      }
      .bill-meta .bill-number {
        font-size: 15px;
        font-weight: 600;
        color: #0e7490;
      }
      .bill-meta .bill-date {
        font-size: 13px;
        color: #64748b;
      }
      /* Section */
      .section {
        margin-bottom: 22px;
      }
      .section h3 {
        font-size: 15px;
        font-weight: 600;
        color: #0e7490;
        margin-bottom: 12px;
        border-left: 4px solid #06b6d4;
        padding-left: 8px;
      }
      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit,minmax(200px,1fr));
        gap: 14px;
      }
      .info-label {
        font-size: 12px;
        text-transform: uppercase;
        color: #64748b;
        font-weight: 600;
      }
      .info-value {
        font-size: 14px;
        font-weight: 600;
        color: #1e293b;
      }
      /* Table */
      table {
        width: 100%;
        border-collapse: collapse;
        border-radius: 12px;
        overflow: hidden;
        margin-top: 12px;
      }
      th {
        background: #06b6d4;
        color: #fff;
        padding: 12px;
        font-size: 13px;
        text-transform: uppercase;
      }
      td {
        padding: 12px;
        border-bottom: 1px solid #e2e8f0;
        font-size: 14px;
      }
      tr:nth-child(even) td {
        background: #f9fafb;
      }
      /* Total */
      .bill-total {
        margin-top: 24px;
        text-align: right;
      }
      .bill-total div {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 6px;
      }
      .bill-total .amount {
        font-size: 22px;
        font-weight: 700;
        color: #0e7490;
      }
      /* Footer */
      .bill-footer {
        margin-top: 30px;
        text-align: center;
        padding-top: 16px;
        border-top: 2px dashed #06b6d4;
        color: #334155;
        font-size: 13px;
      }
      .bill-footer p {
        margin: 4px 0;
      }
      @media print {
        body { background: #fff; margin: 0; }
        .bill-container { box-shadow: none; border-radius: 0; }
        @page { size: A4; margin: 12mm; }
      }
    </style>
  </head>
  <body>
    <div class="bill-container">
      <!-- Header -->
      <div class="bill-header">
        <div class="bill-logo">
          <img src="https://cdn-icons-png.flaticon.com/512/1046/1046873.png" alt="Villa Logo"/>
          <h1>Moon Light Villa</h1>
        </div>
        <div class="bill-meta">
          <div class="bill-number">Bill #${t.bill_number}</div>
          <div class="bill-date">${Q(new Date)}</div>
        </div>
      </div>
      <!-- Customer Info -->
      <div class="section">
        <h3>Customer Information</h3>
        <div class="info-grid">
          <div><div class="info-label">Name</div><div class="info-value">${t.customer_name}</div></div>
          <div><div class="info-label">Phone</div><div class="info-value">${t.customer_phone||"Not provided"}</div></div>
          <div style="grid-column:1/-1"><div class="info-label">Address</div><div class="info-value">${t.customer_address||"Not provided"}</div></div>
        </div>
      </div>
      <!-- Booking Details -->
      <div class="section">
        <h3>Booking Details</h3>
        <table>
          <thead>
            <tr>
              <th>Room</th>
              <th>Check-in</th>
              <th>Check-out</th>
              <th>Days</th>
              <th>Rate/Day</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><b>${t.room_number||"N/A"}</b><br><small>${t.room_type==="ac"?"AC Room":"Non-AC Room"}</small></td>
              <td>${Q(t.check_in_date)}</td>
              <td>${Q(t.check_out_date)}</td>
              <td>${t.days}</td>
              <td>${$(t.price_per_day)}</td>
              <td>${$(t.total_amount)}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- Total -->
      <div class="bill-total">
        <div>Total Amount</div>
        <div class="amount">${$(t.total_amount)}</div>
      </div>
      <!-- Footer -->
      <div class="bill-footer">
        <p>🌴 Thank you for staying at Moon Light Villa 🌴</p>
        <p>We hope you enjoyed your stay and welcome you back soon!</p>
      </div>
    </div>
  </body>
</html>


  `,tr=t=>new Promise((a,s)=>{try{const r=er(t),i=document.createElement("iframe");i.style.position="fixed",i.style.right="0",i.style.bottom="0",i.style.width="0",i.style.height="0",i.style.border="none",document.body.appendChild(i);const o=i.contentWindow||i.contentDocument,l=o.document||o;l.open(),l.write(r),l.close(),i.onload=()=>{setTimeout(()=>{try{i.contentWindow.focus(),i.contentWindow.print(),setTimeout(()=>{document.body.removeChild(i),a({success:!0})},1e3)}catch(n){document.body.removeChild(i),s(new Error("Failed to print: "+n.message))}},500)}}catch(r){s(new Error("Failed to prepare print: "+r.message))}}),sr=()=>{const[t,a]=v.useState(null),[s,r]=v.useState(!1),[i,o]=v.useState(!1),{bills:l,stats:n,isLoading:c,fetchBills:m}=xe();v.useEffect(()=>{m()},[m]);const f=g=>{a(g),r(!0)},N=async g=>{o(!0);try{const b=await tr(g);b.success?T.success("Bill printed successfully!"):T.error("Failed to print bill: "+(b.failureReason||"Unknown error"))}catch(b){console.error("Print error:",b),T.error(b.message||"Failed to print bill")}finally{o(!1)}},d=[{header:"Bill Number",accessor:"bill_number",className:"font-medium text-white"},{header:"Customer",accessor:"customer_name",className:"font-medium"},{header:"Room",accessor:"room_number",render:g=>g||"N/A"},{header:"Check-in",accessor:"check_in_date",render:g=>Q(g)},{header:"Check-out",accessor:"check_out_date",render:g=>Q(g)},{header:"Days",accessor:"days",className:"text-center"},{header:"Amount",accessor:"total_amount",render:g=>e.jsx("span",{className:"font-semibold text-green-400",children:$(g)})},{header:"Date",accessor:"created_at",render:g=>Q(g)},{header:"Actions",accessor:"id",sortable:!1,render:(g,b)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>f(b),className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 rounded-lg transition-colors",title:"View Bill",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(b),disabled:i,className:"p-2 text-green-400 hover:text-green-300 hover:bg-green-500/20 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Print Bill",children:i?e.jsx(se,{size:"sm",color:"green"}):e.jsx(Ye,{className:"w-4 h-4"})})]})}];return e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsx("div",{className:"flex flex-row items-center justify-between gap-4 sm:flex-col sm:items-start sm:gap-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-8 h-8 text-primary-500"}),e.jsx("h1",{className:"text-3xl font-bold text-white sm:text-2xl",children:"My Bills"})]})}),c?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(g=>e.jsx(W,{},g))}),e.jsx(W,{})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Bills"}),e.jsx("p",{className:"text-xl font-bold text-white",children:n.totalBills})]})]})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Today's Bills"}),e.jsx("p",{className:"text-xl font-bold text-white",children:n.todayBills})]})]})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Revenue"}),e.jsx("p",{className:"text-xl font-bold text-white",children:$(n.totalRevenue)})]})]})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Today's Revenue"}),e.jsx("p",{className:"text-xl font-bold text-white",children:$(n.todayRevenue)})]})]})})]}),e.jsx(Ae,{data:l,columns:d,isLoading:!1,emptyMessage:"No bills found. Create your first bill to get started.",searchable:!0,sortable:!0,pagination:!0,pageSize:10})]}),e.jsx(Ue,{isOpen:s,onClose:()=>r(!1),title:`Bill Details - ${t?.bill_number}`,size:"lg",children:t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm lg:grid-cols-1 lg:gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Name:"}),e.jsx("span",{className:"ml-2 text-white font-medium",children:t.customer_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Phone:"}),e.jsx("span",{className:"ml-2 text-white",children:t.customer_phone||"N/A"})]}),e.jsxs("div",{className:"col-span-2 lg:col-span-1",children:[e.jsx("span",{className:"text-slate-400",children:"Address:"}),e.jsx("span",{className:"ml-2 text-white",children:t.customer_address||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Booking Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm lg:grid-cols-1 lg:gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Room Number:"}),e.jsx("span",{className:"ml-2 text-white font-medium",children:t.room_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Room Type:"}),e.jsx("span",{className:"ml-2 text-white",children:t.room_type==="ac"?"AC Room":"Non-AC Room"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Check-in:"}),e.jsx("span",{className:"ml-2 text-white",children:Q(t.check_in_date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Check-out:"}),e.jsx("span",{className:"ml-2 text-white",children:Q(t.check_out_date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Number of Days:"}),e.jsx("span",{className:"ml-2 text-white font-medium",children:t.days})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Rate per Day:"}),e.jsx("span",{className:"ml-2 text-white font-medium",children:$(t.price_per_day)})]})]})]}),e.jsx("div",{className:"border-t border-dark-700 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-slate-300",children:"Total Amount:"}),e.jsx("span",{className:"text-2xl font-bold text-primary-400",children:$(t.total_amount)})]})}),e.jsxs("div",{className:"flex flex-row gap-3 pt-4 lg:flex-col",children:[e.jsx("button",{onClick:()=>r(!1),className:"btn-secondary w-auto order-2 lg:w-full lg:order-1",children:"Close"}),e.jsxs("button",{onClick:()=>N(t),className:"btn-primary w-auto order-1 flex items-center justify-center gap-2 lg:w-full lg:order-2",children:[e.jsx(Ye,{className:"w-4 h-4"}),"Print Bill"]})]})]})})]})},rr=()=>{const[t,a]=v.useState(""),{rooms:s,isLoading:r,fetchRooms:i}=ie();v.useEffect(()=>{i()},[i]);const o=t?s.filter(d=>d.room_number.toLowerCase().includes(t.toLowerCase())||d.room_type.toLowerCase().includes(t.toLowerCase())):s,l=d=>d==="ac"?"AC Room":"Non-AC Room",n=d=>d?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-900/30 text-green-400 border border-green-800",children:"Available"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-900/30 text-red-400 border border-red-800",children:"Occupied"}),c=[{header:"Room Number",accessor:"room_number",render:(d,g)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(z,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-white",children:g.room_number}),e.jsx("p",{className:"text-xs text-slate-400",children:l(g.room_type)})]})]})},{header:"Type",accessor:"room_type",render:d=>e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-2 ${d==="ac"?"bg-blue-900/30 text-blue-400 border border-blue-800":"bg-orange-900/30 text-orange-400 border border-orange-800"}`,children:[d==="ac"?e.jsx(we,{className:"w-4 h-4"}):e.jsx(Ee,{className:"w-4 h-4"}),l(d)]})},{header:"Price Per Day",accessor:"price_per_day",render:d=>e.jsx("span",{className:"font-semibold text-green-400",children:$(d)})},{header:"Status",accessor:"is_active",render:d=>n(d)},{header:"Description",accessor:"description",render:d=>e.jsx("span",{className:"text-slate-300 text-sm",children:d||"No description"})}],m=s.filter(d=>d.is_active),f=s.filter(d=>d.room_type==="ac"),N=s.filter(d=>d.room_type==="non_ac");return e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-8 h-8 text-blue-500"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Room Availability"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search rooms...",value:t,onChange:d=>a(d.target.value),className:"input-field pl-10 w-64"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(z,{className:"w-6 h-6 text-green-400"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:m.length}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Available"})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(z,{className:"w-6 h-6 text-red-400"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:s.length-m.length}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Occupied"})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(we,{className:"w-6 h-6 text-blue-400"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:f.length}),e.jsx("p",{className:"text-slate-400 text-sm",children:"AC Rooms"})]})}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(Ee,{className:"w-6 h-6 text-orange-400"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:N.length}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Non-AC Rooms"})]})})]}),r?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:[1,2,3].map(d=>e.jsx(W,{},d))}):o.length>0?e.jsx(Ae,{data:o,columns:c,isLoading:!1,emptyMessage:"No rooms found",searchable:!1,sortable:!0,pagination:!0,pageSize:10}):e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-400 mb-2",children:t?"No matching rooms found":"No Rooms Available"}),e.jsx("p",{className:"text-slate-500",children:t?"Try adjusting your search criteria.":"Room data will be displayed here once rooms are added to the system."})]})})]})},ar=()=>{const{fetchBills:t}=xe(),{fetchRooms:a}=ie();return v.useEffect(()=>{(async()=>{try{await Promise.all([t(),a()])}catch(r){console.error("Failed to initialize cashier dashboard data:",r)}})()},[t,a]),e.jsx(Ks,{children:e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsxs(Me,{children:[e.jsx(F,{index:!0,element:e.jsx(Ys,{})}),e.jsx(F,{path:"create-bill",element:e.jsx(Zs,{})}),e.jsx(F,{path:"bills",element:e.jsx(sr,{})}),e.jsx(F,{path:"rooms",element:e.jsx(rr,{})}),e.jsx(F,{path:"*",element:e.jsx(te,{to:"/cashier",replace:!0})})]})})})},at=({children:t,requiredRole:a=null})=>{const{user:s,isLoading:r}=me(),i=Se();if(r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950",children:e.jsx(se,{size:"lg"})});if(!s)return e.jsx(te,{to:"/login",state:{from:i},replace:!0});if(a&&s.role!==a){const o=s.role==="admin"?"/admin":"/cashier";return e.jsx(te,{to:o,replace:!0})}return t};function ir(){const{user:t,isLoading:a,initialize:s}=me();return v.useEffect(()=>{s()},[s]),a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(135deg, #0a1929 0%, #1a2332 100%)"},children:e.jsx(se,{size:"xl",variant:"custom",className:"text-blue-400"})}):e.jsx("div",{className:"min-h-screen",style:{background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)"},children:e.jsx(U,{mode:"wait",children:e.jsxs(Me,{children:[e.jsx(F,{path:"/login",element:t?e.jsx(te,{to:t.role==="admin"?"/admin":"/cashier",replace:!0}):e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:e.jsx(Bs,{})})}),e.jsx(F,{path:"/admin/*",element:e.jsx(at,{requiredRole:"admin",children:e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(Js,{})})})}),e.jsx(F,{path:"/cashier/*",element:e.jsx(at,{requiredRole:"cashier",children:e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsx(ar,{})})})}),e.jsx(F,{path:"/",element:e.jsx(te,{to:t?t.role==="admin"?"/admin":"/cashier":"/login",replace:!0})}),e.jsx(F,{path:"*",element:e.jsx(te,{to:"/",replace:!0})})]})})})}const or={VALIDATION:"VALIDATION_ERROR",NETWORK:"NETWORK_ERROR",AUTH:"AUTH_ERROR",PERMISSION:"PERMISSION_ERROR",NOT_FOUND:"NOT_FOUND_ERROR",SERVER:"SERVER_ERROR",UNKNOWN:"UNKNOWN_ERROR"},nr=(t,a="")=>{const s={timestamp:new Date().toISOString(),context:a,message:t.message,stack:t.stack,type:t.type||or.UNKNOWN,details:t.details||null};try{const r=JSON.parse(localStorage.getItem("vila-pos-error-logs")||"[]");r.push(s),r.length>100&&r.splice(0,r.length-100),localStorage.setItem("vila-pos-error-logs",JSON.stringify(r))}catch(r){console.error("Failed to log error:",r)}};class lr extends it.Component{constructor(a){super(a),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,s){this.setState({error:a,errorInfo:s}),nr(a,"ErrorBoundary")}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-dark-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-dark-900/50 backdrop-blur-xl border border-dark-700/50 rounded-2xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Ot,{className:"w-8 h-8 text-red-400"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"We encountered an unexpected error. Don't worry, your data is safe."}),!1,e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:this.handleReset,className:"w-full btn-primary flex items-center justify-center gap-2",children:[e.jsx(Bt,{className:"w-4 h-4"}),"Try Again"]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full btn-secondary",children:"Reload Page"})]})]})}):this.props.children}}const pe=()=>{console.log("React: Attempting to remove loading screen");const t=document.getElementById("initial-loading");if(t)try{console.log("React: Loading element found, removing..."),t.style.opacity="0",t.style.transition="opacity 0.3s ease-out",setTimeout(()=>{t&&t.parentNode&&(console.log("React: Loading element removed successfully"),t.parentNode.removeChild(t))},300)}catch(a){console.error("Error removing loading screen:",a),t&&t.parentNode&&t.parentNode.removeChild(t)}else console.log("React: Loading element not found")},cr=()=>{console.log("React: Initializing app"),setTimeout(()=>{pe()},500),setTimeout(()=>{pe()},2e3),window.electronAPI&&(console.log("React: Electron API detected, setting up listeners"),window.electronAPI.onAppReady(()=>{console.log("React: Received Electron app ready signal"),setTimeout(()=>{pe()},500)}),setTimeout(()=>{pe()},3e3))};cr();Te.createRoot(document.getElementById("root")).render(e.jsx(it.StrictMode,{children:e.jsx(lr,{children:e.jsxs(wt,{children:[e.jsx(ir,{}),e.jsx(zt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1e293b",color:"#f8fafc",border:"1px solid #475569"},success:{iconTheme:{primary:"#10b981",secondary:"#f8fafc"}},error:{iconTheme:{primary:"#ef4444",secondary:"#f8fafc"}}}})]})})}));
